@using Presentation.WebApp.Client.Components.Notifications.Models

<DialogBase Title="@Request.Title"
            Variant="@Request.Variant"
            CloseOnBackdropClick="true"
            OnClose="Cancel">
    <Icon>
        @switch (Request.Variant)
        {
            case DialogVariant.Danger:
                <svg class="w-6 h-6 text-red-600 dark:text-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                break;
            case DialogVariant.Warning:
                <svg class="w-6 h-6 text-amber-600 dark:text-amber-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
                break;
            case DialogVariant.Success:
                <svg class="w-6 h-6 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                break;
            default:
                <svg class="w-6 h-6 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                break;
        }
    </Icon>
    <HeaderContent>
        <p class="text-secondary-600 dark:text-secondary-400">@Request.Message</p>
    </HeaderContent>
    <FooterContent>
        <Button Variant="Button.ButtonVariant.Secondary" OnClick="Cancel">
            @Request.CancelText
        </Button>
        <Button Variant="@ConfirmButtonVariant" OnClick="Confirm">
            @Request.ConfirmText
        </Button>
    </FooterContent>
</DialogBase>

@code {
    [Parameter, EditorRequired]
    public ConfirmDialogRequest Request { get; set; } = default!;

    [Parameter]
    public EventCallback<bool> OnResult { get; set; }

    private Button.ButtonVariant ConfirmButtonVariant => Request.Variant switch
    {
        DialogVariant.Danger => Button.ButtonVariant.Danger,
        DialogVariant.Warning => Button.ButtonVariant.Warning,
        DialogVariant.Success => Button.ButtonVariant.Success,
        _ => Button.ButtonVariant.Primary
    };

    private async Task Confirm()
    {
        await OnResult.InvokeAsync(true);
    }

    private async Task Cancel()
    {
        await OnResult.InvokeAsync(false);
    }
}
